CREATE DATABASE mangata_gallo;


USE mangata_gallo;


CREATE TABLE users (
    user_id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    email VARCHAR(100) NOT NULL UNIQUE,
    first_name VARCHAR(50),
    last_name VARCHAR(50),
    address VARCHAR(255),
    phone VARCHAR(15),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);


CREATE TABLE categories (
    category_id INT AUTO_INCREMENT PRIMARY KEY,
    category_name VARCHAR(50) NOT NULL
);


CREATE TABLE products (
    product_id INT AUTO_INCREMENT PRIMARY KEY,
    product_name VARCHAR(100) NOT NULL,
    category_id INT,
    description TEXT,
    price DECIMAL(10, 2) NOT NULL,
    image_url VARCHAR(255),
    stock INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (category_id) REFERENCES categories(category_id)
);


CREATE TABLE orders (
    order_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    order_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    status VARCHAR(50),
    total DECIMAL(10, 2) NOT NULL,
    FOREIGN KEY (user_id) REFERENCES users(user_id)
);


CREATE TABLE order_details (
    order_detail_id INT AUTO_INCREMENT PRIMARY KEY,
    order_id INT,
    product_id INT,
    quantity INT NOT NULL,
    price DECIMAL(10, 2) NOT NULL,
    FOREIGN KEY (order_id) REFERENCES orders(order_id),
    FOREIGN KEY (product_id) REFERENCES products(product_id)
);


CREATE TABLE reviews (
    review_id INT AUTO_INCREMENT PRIMARY KEY,
    product_id INT,
    user_id INT,
    rating INT CHECK (rating >= 1 AND rating <= 5),
    review_text TEXT,
    review_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (product_id) REFERENCES products(product_id),
    FOREIGN KEY (user_id) REFERENCES users(user_id)
);


INSERT INTO categories (category_name) VALUES
('Engagement Rings'),
('Rings'),
('Necklaces'),
('Earrings'),
('Anklets'),
('Bracelets');


INSERT INTO products (product_name, category_id, description, price, image_url, stock) VALUES
('Engagement Ring 1', 1, 'Beautiful engagement ring.', 1500.00, 'Assets/eggring.avif', 10),
('Ring 1', 2, 'Elegant ring.', 1200.00, 'Assets/nring.avif', 20),
('Necklace 1', 3, 'Gorgeous necklace.', 1800.00, 'Assets/necklace.jpg', 15),
('Earrings 1', 4, 'Stylish earrings.', 700.00, 'Assets/ear.avif', 25),
('Anklet 1', 5, 'Charming anklet.', 300.00, 'Assets/anklettt.jpg', 30),
('Bracelet 1', 6, 'Delicate bracelet.', 900.00, 'Assets/brace2.webp', 12);
